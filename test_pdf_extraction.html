<!DOCTYPE html>
<html>
<head>
    <title>Test PDF Text Extraction</title>
</head>
<body>
    <h1>PDF Text Extraction Test</h1>
    <div id="output"></div>
    
    <script>
        // Copy the exact extractTariflerDetay function from the main file
        function extractTariflerDetay(text) {
            console.log('ðŸ” extractTariflerDetay baÅŸlÄ±yor...');
            console.log('ðŸ“„ Ham metin uzunluÄŸu:', text.length);
            
            // Test data that should have day and meal lines formatted
            let lines = text.split('\n').map(line => line.trim()).filter(l => l.length > 1);
            
            const result = lines.map(line => {
                console.log(`Processing line: "${line}"`);
                // Simulate the processing logic
                let temizlenmis = line.toLowerCase().trim();
                return temizlenmis;
            });
            
            // Add the emoji formatting logic
            const formattedResult = result.map(line => {
                if (!line || typeof line !== 'string') return line;
                
                const originalLine = line;
                const lowerLine = line.toLowerCase().trim();
                
                // GÃ¼n isimlerini tespit et ve emoji ekle
                const gunIsimleri = [
                    { orijinal: 'pazartesi', buyuk: 'PAZARTESÄ°' },
                    { orijinal: 'salÄ±', buyuk: 'SALI' },
                    { orijinal: 'Ã§arÅŸamba', buyuk: 'Ã‡ARÅžAMBA' },
                    { orijinal: 'perÅŸembe', buyuk: 'PERÅžEMBE' },
                    { orijinal: 'cuma', buyuk: 'CUMA' },
                    { orijinal: 'cumartesi', buyuk: 'CUMARTESÄ°' },
                    { orijinal: 'pazar', buyuk: 'PAZAR' }
                ];
                
                // GÃ¼n kontrolÃ¼
                for (const gun of gunIsimleri) {
                    if (lowerLine === gun.orijinal || 
                        lowerLine === gun.buyuk.toLowerCase() ||
                        (lowerLine.includes(gun.orijinal) && lowerLine.length <= gun.orijinal.length + 5)) {
                        console.log(`ðŸ“… GÃ¼n satÄ±rÄ± tespit edildi: "${originalLine}" â†’ "ðŸ“… ${gun.buyuk}"`);
                        return `ðŸ“… ${gun.buyuk}`;
                    }
                }
                
                // Ã–ÄŸÃ¼n kontrolÃ¼
                if (lowerLine.includes('Ã¶ÄŸle') && (lowerLine.includes('saat') || lowerLine.includes('tercihen') || lowerLine.includes('12:00'))) {
                    console.log(`ðŸ½ï¸ Ã–ÄŸle Ã¶ÄŸÃ¼nÃ¼ tespit edildi: "${originalLine}" â†’ "ðŸ½ï¸ Ã–ÄŸle (tercihen saat 12:00 civarÄ±nda)"`);
                    return 'ðŸ½ï¸ Ã–ÄŸle (tercihen saat 12:00 civarÄ±nda)';
                }
                
                if (lowerLine.includes('akÅŸam') && (lowerLine.includes('hava') || lowerLine.includes('tercihen') || lowerLine.includes('kararmak') || lowerLine.includes('kararÄ±nca'))) {
                    console.log(`ðŸ½ï¸ AkÅŸam Ã¶ÄŸÃ¼nÃ¼ tespit edildi: "${originalLine}" â†’ "ðŸ½ï¸ AkÅŸam (tercihen hava kararÄ±nca)"`);
                    return 'ðŸ½ï¸ AkÅŸam (tercihen hava kararÄ±nca)';
                }
                
                if (lowerLine.includes('sabah') && (lowerLine.includes('saat') || lowerLine.includes('tercihen') || lowerLine.includes('07:00') || lowerLine.includes('7:00'))) {
                    console.log(`ðŸ½ï¸ Sabah Ã¶ÄŸÃ¼nÃ¼ tespit edildi: "${originalLine}" â†’ "ðŸ½ï¸ Sabah (tercihen saat 07:00 civarÄ±nda)"`);
                    return 'ðŸ½ï¸ Sabah (tercihen saat 07:00 civarÄ±nda)';
                }
                
                return originalLine;
            });
            
            console.log('âœ… Emoji formatlanmÄ±ÅŸ final liste:', formattedResult);
            return formattedResult;
        }
        
        // Test data mimicking PDF content including the patterns mentioned in the problem statement
        const testPdfText = `Test Hasta
        1. Hafta
        PAZARTESÄ°
        Ã–ÄŸle (tercihen saat 12:00 civarÄ±nda)
        tavuk pirzola 150gr
        salata
        AkÅŸam (tercihen hava kararÄ±nca)
        et yemeÄŸi
        SALI
        sabah saat 07:00 civarÄ±nda  
        kahvaltÄ±
        Ã¶ÄŸle tercihen saat 12:00
        balÄ±k
        Ã‡ARÅžAMBA
        150 gr avokado
        normal yemek satÄ±rÄ±
        PERÅžEMBE
        Ã¶ÄŸle
        akÅŸam
        CUMA
        sabah`;
        
        console.log('ðŸ§ª Test baÅŸlatÄ±lÄ±yor...');
        console.log('ðŸ“„ Test verisi:', testPdfText);
        
        const result = extractTariflerDetay(testPdfText);
        
        console.log('âœ… Test tamamlandÄ±');
        console.log('ðŸ“Š SonuÃ§:', result);
        
        // Display results
        document.getElementById('output').innerHTML = `
            <h2>Test SonuÃ§larÄ±:</h2>
            <h3>Orijinal Metin:</h3>
            <pre>${testPdfText}</pre>
            <h3>Ä°ÅŸlenmiÅŸ SonuÃ§:</h3>
            <ul>
                ${result.map(line => `<li>${line}</li>`).join('')}
            </ul>
            <h3>Beklenen Emoji FormatlanmÄ±ÅŸ SatÄ±rlar:</h3>
            <ul>
                ${result.filter(line => line.includes('ðŸ“…') || line.includes('ðŸ½ï¸')).map(line => `<li style="color: green; font-weight: bold;">${line}</li>`).join('')}
            </ul>
        `;
    </script>
</body>
</html>